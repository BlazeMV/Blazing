<?php
namespace $name;

include('../vendor/autoload.php');

use Blazing\Bot;
use Blazing\Logger;

define('APP_ROOT_FOLDER', realpath(__DIR__.'/../'));
define('BOT_NAME', '{bot_var_name}');

//logs all errors occure into logs/errors.log
function shutDownFunction() {
    $error = error_get_last();
    $logger = new Logger(BOT_NAME);
    $logger->logError(var_export($error, true));
}
register_shutdown_function('shutDownFunction');

//autoloads this bot (so you can use this bots namespace on other places)
$loader = require APP_ROOT_FOLDER . '/vendor/autoload.php';
$loader->setPsr4(BOT_NAME . '\\', __DIR__);

/**
 * Replace null with respective strings
 * or there will be a delay in responding for every update, since Bot class will have to make an extra request to the telegram server to get those parameters.
*/
$token = '{bot_token}';
$bot_username = null;
$bot_name = null;
$bot_id = null;

${bot_var_name} = new Bot($token, $bot_username, $bot_name, $bot_id);

return ${bot_var_name}->getUpdates();

?>